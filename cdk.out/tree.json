{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"MatrixMedsStack":{"id":"MatrixMedsStack","path":"MatrixMedsStack","children":{"MatrixMedsRepository":{"id":"MatrixMedsRepository","path":"MatrixMedsStack/MatrixMedsRepository","children":{"Resource":{"id":"Resource","path":"MatrixMedsStack/MatrixMedsRepository/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ECR::Repository","aws:cdk:cloudformation:props":{"repositoryName":"matrixmeds-api","tags":[{"key":"aws-cdk:auto-delete-images","value":"true"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.CfnRepository","version":"2.193.0"}},"AutoDeleteImagesCustomResource":{"id":"AutoDeleteImagesCustomResource","path":"MatrixMedsStack/MatrixMedsRepository/AutoDeleteImagesCustomResource","children":{"Default":{"id":"Default","path":"MatrixMedsStack/MatrixMedsRepository/AutoDeleteImagesCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.193.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.Repository","version":"2.193.0","metadata":[]}},"Custom::ECRAutoDeleteImagesCustomResourceProvider":{"id":"Custom::ECRAutoDeleteImagesCustomResourceProvider","path":"MatrixMedsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"MatrixMedsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.193.0"}},"Role":{"id":"Role","path":"MatrixMedsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.193.0"}},"Handler":{"id":"Handler","path":"MatrixMedsStack/Custom::ECRAutoDeleteImagesCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.193.0"}},"MatrixMedsTable":{"id":"MatrixMedsTable","path":"MatrixMedsStack/MatrixMedsTable","children":{"Resource":{"id":"Resource","path":"MatrixMedsStack/MatrixMedsTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"medication1","attributeType":"S"},{"attributeName":"medication2","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"medication1","keyType":"HASH"},{"attributeName":"medication2","keyType":"RANGE"}],"tableName":"matrixmeds-interactions"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.193.0"}},"ScalingRole":{"id":"ScalingRole","path":"MatrixMedsStack/MatrixMedsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.193.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.193.0","metadata":[]}},"MatrixMedsUserPool":{"id":"MatrixMedsUserPool","path":"MatrixMedsStack/MatrixMedsUserPool","children":{"Resource":{"id":"Resource","path":"MatrixMedsStack/MatrixMedsUserPool/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"matrixmeds-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.193.0"}},"MatrixMedsClient":{"id":"MatrixMedsClient","path":"MatrixMedsStack/MatrixMedsUserPool/MatrixMedsClient","children":{"Resource":{"id":"Resource","path":"MatrixMedsStack/MatrixMedsUserPool/MatrixMedsClient/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"matrixmeds-client","explicitAuthFlows":["ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"MatrixMedsUserPool096B6D22"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.193.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.193.0","metadata":[]}},"UserPoolId":{"id":"UserPoolId","path":"MatrixMedsStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"ClientId":{"id":"ClientId","path":"MatrixMedsStack/ClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"RepositoryURI":{"id":"RepositoryURI","path":"MatrixMedsStack/RepositoryURI","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatrixMedsStack/CDKMetadata","children":{"Default":{"id":"Default","path":"MatrixMedsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.193.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatrixMedsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.193.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatrixMedsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.193.0"}},"MatrixMedsAuthStack":{"id":"MatrixMedsAuthStack","path":"MatrixMedsAuthStack","children":{"MatrixMedsUserPool":{"id":"MatrixMedsUserPool","path":"MatrixMedsAuthStack/MatrixMedsUserPool","children":{"Resource":{"id":"Resource","path":"MatrixMedsAuthStack/MatrixMedsUserPool/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","mfaConfiguration":"OFF","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"matrixmeds-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.193.0"}},"MatrixMedsClient":{"id":"MatrixMedsClient","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsClient","children":{"Resource":{"id":"Resource","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsClient/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":1440,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://matrixmeds.com/callback"],"clientName":"matrixmeds-client","explicitAuthFlows":["ALLOW_CUSTOM_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":1440,"logoutUrLs":["https://matrixmeds.com/logout"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"MatrixMedsUserPool096B6D22"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.193.0","metadata":[]}},"MatrixMedsDomain":{"id":"MatrixMedsDomain","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsDomain","children":{"Resource":{"id":"Resource","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsDomain/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"matrixmeds","userPoolId":{"Ref":"MatrixMedsUserPool096B6D22"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.193.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.193.0","metadata":[]}},"UserPoolId":{"id":"UserPoolId","path":"MatrixMedsAuthStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"ClientId":{"id":"ClientId","path":"MatrixMedsAuthStack/ClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"UserPoolDomain":{"id":"UserPoolDomain","path":"MatrixMedsAuthStack/UserPoolDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatrixMedsAuthStack/CDKMetadata","children":{"Default":{"id":"Default","path":"MatrixMedsAuthStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.193.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatrixMedsAuthStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.193.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatrixMedsAuthStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.193.0"}},"MatrixMedsLambdaStack":{"id":"MatrixMedsLambdaStack","path":"MatrixMedsLambdaStack","children":{"LambdaImage":{"id":"LambdaImage","path":"MatrixMedsLambdaStack/LambdaImage","children":{"Staging":{"id":"Staging","path":"MatrixMedsLambdaStack/LambdaImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.193.0"}},"Repository":{"id":"Repository","path":"MatrixMedsLambdaStack/LambdaImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.193.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.193.0"}},"MatrixMedsLambda":{"id":"MatrixMedsLambda","path":"MatrixMedsLambdaStack/MatrixMedsLambda","children":{"ServiceRole":{"id":"ServiceRole","path":"MatrixMedsLambdaStack/MatrixMedsLambda/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MatrixMedsLambdaStack/MatrixMedsLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.193.0","metadata":[]}},"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsLambda/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.193.0","metadata":[]}},"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsLambda/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Join":["",["476219038852.dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/cdk-hnb659fds-container-assets-476219038852-us-east-1:",{"Fn::Sub":"476219038852.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-476219038852-us-east-1:361fb3c81fe192bc04a498aa83ced234d6d7ebad8073b5b5badd3555483d8b2b"}]]}},"memorySize":512,"packageType":"Image","role":{"Fn::GetAtt":["MatrixMedsLambdaServiceRoleFA05094F","Arn"]},"timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.193.0","metadata":[]}},"MatrixMedsHttpApi":{"id":"MatrixMedsHttpApi","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi","children":{"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"name":"MatrixMedsHttpApi","protocolType":"HTTP"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.193.0"}},"DefaultRoute":{"id":"DefaultRoute","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute","children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/LambdaIntegration","children":{"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/LambdaIntegration/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MatrixMedsHttpApiFAE9B35D"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["MatrixMedsLambdaB06A5FAE","Arn"]},"payloadFormatVersion":"2.0"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.193.0","metadata":[]}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/LambdaIntegration-Permission","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["MatrixMedsLambdaB06A5FAE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:476219038852:",{"Ref":"MatrixMedsHttpApiFAE9B35D"},"/*/*"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.193.0"}},"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MatrixMedsHttpApiFAE9B35D"},"authorizationType":"NONE","routeKey":"$default","target":{"Fn::Join":["",["integrations/",{"Ref":"MatrixMedsHttpApiDefaultRouteLambdaIntegrationBD93D5B4"}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.193.0","metadata":[]}},"DefaultStage":{"id":"DefaultStage","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultStage","children":{"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultStage/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MatrixMedsHttpApiFAE9B35D"},"autoDeploy":true,"stageName":"$default"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.193.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.193.0","metadata":[]}},"ApiUrl":{"id":"ApiUrl","path":"MatrixMedsLambdaStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.193.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatrixMedsLambdaStack/CDKMetadata","children":{"Default":{"id":"Default","path":"MatrixMedsLambdaStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.193.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatrixMedsLambdaStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.193.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatrixMedsLambdaStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.193.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.193.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.193.0"}}}