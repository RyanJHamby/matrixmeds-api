{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.202.0"},"children":{"MatrixMedsDatabaseStack":{"id":"MatrixMedsDatabaseStack","path":"MatrixMedsDatabaseStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.202.0"},"children":{"MatrixMedsTable":{"id":"MatrixMedsTable","path":"MatrixMedsDatabaseStack/MatrixMedsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsDatabaseStack/MatrixMedsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"medication1","attributeType":"S"},{"attributeName":"medication2","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"ReverseLookup","keySchema":[{"attributeName":"medication2","keyType":"HASH"},{"attributeName":"medication1","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"medication1","keyType":"HASH"},{"attributeName":"medication2","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"matrixmeds-interactions"}}},"ScalingRole":{"id":"ScalingRole","path":"MatrixMedsDatabaseStack/MatrixMedsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}}}},"TableName":{"id":"TableName","path":"MatrixMedsDatabaseStack/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"TableArn":{"id":"TableArn","path":"MatrixMedsDatabaseStack/TableArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatrixMedsDatabaseStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MatrixMedsDatabaseStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatrixMedsDatabaseStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.202.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatrixMedsDatabaseStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.202.0"}}}},"MatrixMedsAuthStack":{"id":"MatrixMedsAuthStack","path":"MatrixMedsAuthStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.202.0"},"children":{"MatrixMedsUserPool":{"id":"MatrixMedsUserPool","path":"MatrixMedsAuthStack/MatrixMedsUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsAuthStack/MatrixMedsUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","mfaConfiguration":"OFF","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"matrixmeds-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"MatrixMedsClient":{"id":"MatrixMedsClient","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":1440,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://matrixmeds.com/callback"],"clientName":"matrixmeds-client","explicitAuthFlows":["ALLOW_CUSTOM_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":1440,"logoutUrLs":["https://matrixmeds.com/logout"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"MatrixMedsUserPool096B6D22"}}}}}},"MatrixMedsDomain":{"id":"MatrixMedsDomain","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsAuthStack/MatrixMedsUserPool/MatrixMedsDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"matrixmeds","userPoolId":{"Ref":"MatrixMedsUserPool096B6D22"}}}}}}}},"UserPoolId":{"id":"UserPoolId","path":"MatrixMedsAuthStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"ClientId":{"id":"ClientId","path":"MatrixMedsAuthStack/ClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"UserPoolDomain":{"id":"UserPoolDomain","path":"MatrixMedsAuthStack/UserPoolDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatrixMedsAuthStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MatrixMedsAuthStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatrixMedsAuthStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.202.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatrixMedsAuthStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.202.0"}}}},"MatrixMedsLambdaStack":{"id":"MatrixMedsLambdaStack","path":"MatrixMedsLambdaStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.202.0"},"children":{"MatrixMedsRepo":{"id":"MatrixMedsRepo","path":"MatrixMedsLambdaStack/MatrixMedsRepo","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.202.0","metadata":[]}},"MatrixMedsLambda":{"id":"MatrixMedsLambda","path":"MatrixMedsLambdaStack/MatrixMedsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MatrixMedsLambdaStack/MatrixMedsLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MatrixMedsLambdaStack/MatrixMedsLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Join":["",["476219038852.dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/matrixmeds-api:latest"]]}},"memorySize":512,"packageType":"Image","role":{"Fn::GetAtt":["MatrixMedsLambdaServiceRoleFA05094F","Arn"]},"timeout":10}}}}},"MatrixMedsHttpApi":{"id":"MatrixMedsHttpApi","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"name":"MatrixMedsHttpApi","protocolType":"HTTP"}}},"DefaultRoute":{"id":"DefaultRoute","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.202.0","metadata":[]},"children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/LambdaIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/LambdaIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MatrixMedsHttpApiFAE9B35D"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["MatrixMedsLambdaB06A5FAE","Arn"]},"payloadFormatVersion":"2.0"}}}}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["MatrixMedsLambdaB06A5FAE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:476219038852:",{"Ref":"MatrixMedsHttpApiFAE9B35D"},"/*/*"]]}}}},"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultRoute/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MatrixMedsHttpApiFAE9B35D"},"authorizationType":"NONE","routeKey":"$default","target":{"Fn::Join":["",["integrations/",{"Ref":"MatrixMedsHttpApiDefaultRouteLambdaIntegrationBD93D5B4"}]]}}}}}},"DefaultStage":{"id":"DefaultStage","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MatrixMedsLambdaStack/MatrixMedsHttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MatrixMedsHttpApiFAE9B35D"},"autoDeploy":true,"stageName":"$default"}}}}}}},"ApiUrl":{"id":"ApiUrl","path":"MatrixMedsLambdaStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"MatrixMedsLambdaStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"MatrixMedsLambdaStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MatrixMedsLambdaStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.202.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MatrixMedsLambdaStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.202.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}